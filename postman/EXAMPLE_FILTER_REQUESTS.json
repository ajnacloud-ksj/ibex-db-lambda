{
  "info": {
    "name": "Ibex DB - Filter Examples",
    "description": "Examples of the new filters array format",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Simple Filter - Equal",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "x-api-key", "value": "{{api_key}}"}
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"products\",\n  \"filters\": [\n    {\"field\": \"category\", \"operator\": \"eq\", \"value\": \"electronics\"}\n  ],\n  \"limit\": 10\n}"
        },
        "url": {
          "raw": "{{baseUrl}}",
          "host": ["{{baseUrl}}"]
        }
      }
    },
    {
      "name": "2. Multiple Filters - AND",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "x-api-key", "value": "{{api_key}}"}
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"products\",\n  \"filters\": [\n    {\"field\": \"category\", \"operator\": \"eq\", \"value\": \"electronics\"},\n    {\"field\": \"price\", \"operator\": \"gte\", \"value\": 50000},\n    {\"field\": \"stock\", \"operator\": \"gt\", \"value\": 0}\n  ],\n  \"limit\": 10\n}"
        },
        "url": {
          "raw": "{{baseUrl}}",
          "host": ["{{baseUrl}}"]
        }
      }
    },
    {
      "name": "3. Range Filter - Between",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "x-api-key", "value": "{{api_key}}"}
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"products\",\n  \"filters\": [\n    {\"field\": \"price\", \"operator\": \"gte\", \"value\": 10000},\n    {\"field\": \"price\", \"operator\": \"lte\", \"value\": 50000}\n  ],\n  \"limit\": 10\n}"
        },
        "url": {
          "raw": "{{baseUrl}}",
          "host": ["{{baseUrl}}"]
        }
      }
    },
    {
      "name": "4. IN Operator - List",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "x-api-key", "value": "{{api_key}}"}
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"products\",\n  \"filters\": [\n    {\n      \"field\": \"category\",\n      \"operator\": \"in\",\n      \"value\": [\"electronics\", \"appliances\", \"gadgets\"]\n    }\n  ],\n  \"limit\": 10\n}"
        },
        "url": {
          "raw": "{{baseUrl}}",
          "host": ["{{baseUrl}}"]
        }
      }
    },
    {
      "name": "5. LIKE Pattern Match",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "x-api-key", "value": "{{api_key}}"}
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"products\",\n  \"filters\": [\n    {\"field\": \"name\", \"operator\": \"like\", \"value\": \"%laptop%\"}\n  ],\n  \"limit\": 10\n}"
        },
        "url": {
          "raw": "{{baseUrl}}",
          "host": ["{{baseUrl}}"]
        }
      }
    },
    {
      "name": "6. Bulk Update with Filters",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "x-api-key", "value": "{{api_key}}"}
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"operation\": \"UPDATE\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"products\",\n  \"filters\": [\n    {\"field\": \"category\", \"operator\": \"eq\", \"value\": \"electronics\"},\n    {\"field\": \"price\", \"operator\": \"gte\", \"value\": 50000}\n  ],\n  \"updates\": {\n    \"discount\": 10,\n    \"on_sale\": true\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}",
          "host": ["{{baseUrl}}"]
        }
      }
    },
    {
      "name": "7. Delete with Filters",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "x-api-key", "value": "{{api_key}}"}
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"operation\": \"DELETE\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"products\",\n  \"filters\": [\n    {\"field\": \"stock\", \"operator\": \"eq\", \"value\": 0}\n  ],\n  \"mode\": \"soft\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}",
          "host": ["{{baseUrl}}"]
        }
      }
    },
    {
      "name": "8. Aggregation with Pre-filter",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "x-api-key", "value": "{{api_key}}"}
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"products\",\n  \"filters\": [\n    {\"field\": \"price\", \"operator\": \"gte\", \"value\": 10000}\n  ],\n  \"aggregations\": [\n    {\"field\": \"price\", \"function\": \"avg\", \"alias\": \"avg_price\"},\n    {\"field\": \"price\", \"function\": \"sum\", \"alias\": \"total_revenue\"},\n    {\"field\": null, \"function\": \"count\", \"alias\": \"product_count\"}\n  ],\n  \"group_by\": [\"category\"]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}",
          "host": ["{{baseUrl}}"]
        }
      }
    },
    {
      "name": "9. Aggregation with HAVING",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "x-api-key", "value": "{{api_key}}"}
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"orders\",\n  \"aggregations\": [\n    {\"field\": \"amount\", \"function\": \"sum\", \"alias\": \"total_sales\"},\n    {\"field\": null, \"function\": \"count\", \"alias\": \"order_count\"}\n  ],\n  \"group_by\": [\"customer_id\"],\n  \"having\": [\n    {\"field\": \"total_sales\", \"operator\": \"gte\", \"value\": 100000}\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}",
          "host": ["{{baseUrl}}"]
        }
      }
    },
    {
      "name": "10. Complex Multi-Filter",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "x-api-key", "value": "{{api_key}}"}
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"products\",\n  \"filters\": [\n    {\"field\": \"category\", \"operator\": \"in\", \"value\": [\"electronics\", \"appliances\"]},\n    {\"field\": \"price\", \"operator\": \"gte\", \"value\": 10000},\n    {\"field\": \"price\", \"operator\": \"lte\", \"value\": 100000},\n    {\"field\": \"stock\", \"operator\": \"gt\", \"value\": 0},\n    {\"field\": \"name\", \"operator\": \"like\", \"value\": \"%smart%\"}\n  ],\n  \"sort\": [{\"field\": \"price\", \"order\": \"desc\"}],\n  \"limit\": 20\n}"
        },
        "url": {
          "raw": "{{baseUrl}}",
          "host": ["{{baseUrl}}"]
        }
      }
    }
  ]
}

