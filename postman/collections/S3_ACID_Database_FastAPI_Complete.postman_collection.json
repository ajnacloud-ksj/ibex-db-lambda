{
  "info": {
    "name": "S3 ACID Database - FastAPI Complete",
    "description": "Complete collection with all features: CRUD, Column Selection, GROUP BY, Aggregations, Audit Queries\n\nEnvironment Variables:\n- baseUrl: API base URL (default: http://localhost:9000)\n- tenant_id: Tenant identifier (default: test-tenant)\n- namespace: Table namespace (default: default)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "00. Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": ["{{baseUrl}}"],
          "path": ["health"]
        },
        "description": "Check if the FastAPI server is healthy"
      }
    },
    {
      "name": "01. Basic CRUD Operations",
      "item": [
        {
          "name": "CREATE TABLE - employees",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"CREATE_TABLE\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"schema\": {\n    \"fields\": {\n      \"employee_id\": {\"type\": \"string\", \"required\": true},\n      \"name\": {\"type\": \"string\", \"required\": true},\n      \"email\": {\"type\": \"string\", \"required\": true},\n      \"department\": {\"type\": \"string\", \"required\": true},\n      \"salary\": {\"type\": \"double\", \"required\": true},\n      \"age\": {\"type\": \"integer\", \"required\": false}\n    }\n  },\n  \"if_not_exists\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            }
          }
        },
        {
          "name": "WRITE - Insert employees",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"WRITE\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"records\": [\n    {\"employee_id\": \"E001\", \"name\": \"Alice Johnson\", \"email\": \"alice@company.com\", \"department\": \"Engineering\", \"salary\": 95000, \"age\": 30},\n    {\"employee_id\": \"E002\", \"name\": \"Bob Smith\", \"email\": \"bob@company.com\", \"department\": \"Sales\", \"salary\": 75000, \"age\": 28},\n    {\"employee_id\": \"E003\", \"name\": \"Charlie Brown\", \"email\": \"charlie@company.com\", \"department\": \"Engineering\", \"salary\": 110000, \"age\": 35},\n    {\"employee_id\": \"E004\", \"name\": \"Diana Prince\", \"email\": \"diana@company.com\", \"department\": \"Marketing\", \"salary\": 85000, \"age\": 32},\n    {\"employee_id\": \"E005\", \"name\": \"Eve Davis\", \"email\": \"eve@company.com\", \"department\": \"Engineering\", \"salary\": 105000, \"age\": 29}\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            }
          }
        },
        {
          "name": "QUERY - All employees",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            }
          }
        },
        {
          "name": "UPDATE - Give raise",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"UPDATE\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"filter\": {\"employee_id\": {\"eq\": \"E001\"}},\n  \"updates\": {\"salary\": 100000, \"department\": \"Senior Engineering\"}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            }
          }
        },
        {
          "name": "DELETE - Soft delete",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"DELETE\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"filter\": {\"employee_id\": {\"eq\": \"E002\"}}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            }
          }
        },
        {
          "name": "LIST_TABLES",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"LIST_TABLES\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            }
          }
        },
        {
          "name": "DESCRIBE_TABLE",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"DESCRIBE_TABLE\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            }
          }
        }
      ]
    },
    {
      "name": "02. Column Selection (Projection)",
      "item": [
        {
          "name": "Select specific columns",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"projection\": [\"name\", \"email\", \"department\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Select only name, email, and department columns"
          }
        },
        {
          "name": "Select with system fields",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"projection\": [\"employee_id\", \"name\", \"_version\", \"_timestamp\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Include system fields for versioning/audit"
          }
        },
        {
          "name": "Select with filter and sorting",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"projection\": [\"name\", \"department\", \"salary\"],\n  \"filter\": {\"salary\": {\"gte\": 90000}},\n  \"sort\": [{\"field\": \"salary\", \"order\": \"desc\"}]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "High earners with selected columns, sorted by salary"
          }
        }
      ]
    },
    {
      "name": "03. Aggregations & GROUP BY",
      "item": [
        {
          "name": "COUNT by department",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"projection\": [\"department\"],\n  \"aggregations\": [\n    {\"op\": \"count\", \"field\": null, \"alias\": \"employee_count\"}\n  ],\n  \"group_by\": [\"department\"],\n  \"sort\": [{\"field\": \"employee_count\", \"order\": \"desc\"}]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Count employees per department"
          }
        },
        {
          "name": "Multiple aggregations",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"projection\": [\"department\"],\n  \"aggregations\": [\n    {\"op\": \"count\", \"field\": null, \"alias\": \"headcount\"},\n    {\"op\": \"avg\", \"field\": \"salary\", \"alias\": \"avg_salary\"},\n    {\"op\": \"min\", \"field\": \"salary\", \"alias\": \"min_salary\"},\n    {\"op\": \"max\", \"field\": \"salary\", \"alias\": \"max_salary\"},\n    {\"op\": \"sum\", \"field\": \"salary\", \"alias\": \"total_payroll\"}\n  ],\n  \"group_by\": [\"department\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Complete salary analysis by department"
          }
        },
        {
          "name": "COUNT DISTINCT",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"aggregations\": [\n    {\"op\": \"count\", \"field\": \"department\", \"alias\": \"unique_departments\", \"distinct\": true},\n    {\"op\": \"count\", \"field\": null, \"alias\": \"total_employees\"}\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Count unique departments and total employees"
          }
        },
        {
          "name": "GROUP BY with HAVING",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"projection\": [\"department\"],\n  \"aggregations\": [\n    {\"op\": \"count\", \"field\": null, \"alias\": \"headcount\"},\n    {\"op\": \"avg\", \"field\": \"salary\", \"alias\": \"avg_salary\"}\n  ],\n  \"group_by\": [\"department\"],\n  \"having\": {\"headcount\": {\"gt\": 2}}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Departments with more than 2 employees"
          }
        },
        {
          "name": "WHERE + GROUP BY + HAVING",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"filter\": {\"age\": {\"gte\": 30}},\n  \"projection\": [\"department\"],\n  \"aggregations\": [\n    {\"op\": \"count\", \"field\": null, \"alias\": \"senior_count\"},\n    {\"op\": \"avg\", \"field\": \"salary\", \"alias\": \"avg_salary\"}\n  ],\n  \"group_by\": [\"department\"],\n  \"having\": {\"avg_salary\": {\"gt\": 90000}}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Senior employees (age >= 30) in high-paying departments"
          }
        }
      ]
    },
    {
      "name": "04. Audit & Versioning",
      "item": [
        {
          "name": "View all versions of a record",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"filter\": {\"employee_id\": {\"eq\": \"E001\"}},\n  \"projection\": [\"_version\", \"_timestamp\", \"name\", \"department\", \"salary\"],\n  \"sort\": [{\"field\": \"_version\", \"order\": \"asc\"}]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Complete change history for employee E001"
          }
        },
        {
          "name": "Get latest version only",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"filter\": {\"employee_id\": {\"eq\": \"E001\"}},\n  \"projection\": [\"_version\", \"_timestamp\", \"name\", \"department\", \"salary\"],\n  \"sort\": [{\"field\": \"_version\", \"order\": \"desc\"}],\n  \"limit\": 1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Current state (latest version) of employee"
          }
        },
        {
          "name": "Track salary changes",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"filter\": {\"employee_id\": {\"eq\": \"E001\"}},\n  \"projection\": [\"_version\", \"_timestamp\", \"salary\"],\n  \"sort\": [{\"field\": \"_timestamp\", \"order\": \"asc\"}]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Salary history for compliance/audit"
          }
        },
        {
          "name": "Changes by department",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"filter\": {\"department\": {\"eq\": \"Engineering\"}},\n  \"projection\": [\"employee_id\", \"name\", \"_version\", \"_timestamp\"],\n  \"sort\": [{\"field\": \"_timestamp\", \"order\": \"desc\"}]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "All changes in Engineering department"
          }
        }
      ]
    },
    {
      "name": "05. Soft Delete & Hard Delete",
      "item": [
        {
          "name": "Soft delete employee",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"DELETE\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"filter\": {\"employee_id\": {\"eq\": \"E003\"}}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Mark record as deleted (_deleted=true)"
          }
        },
        {
          "name": "Query without deleted",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"include_deleted\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Normal query - excludes soft-deleted records"
          }
        },
        {
          "name": "Query with deleted (include_deleted)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"include_deleted\": true,\n  \"projection\": [\"employee_id\", \"name\", \"_deleted\", \"_deleted_at\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Show all records including soft-deleted"
          }
        },
        {
          "name": "Hard delete (permanent)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"HARD_DELETE\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"filter\": {\"employee_id\": {\"eq\": \"E003\"}},\n  \"confirm\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Permanently remove record from storage (IRREVERSIBLE!)"
          }
        }
      ]
    },
    {
      "name": "06. Advanced Queries",
      "item": [
        {
          "name": "Complex filter conditions",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"filter\": {\n    \"salary\": {\"gte\": 90000, \"lte\": 110000},\n    \"department\": {\"in\": [\"Engineering\", \"Marketing\"]}\n  },\n  \"projection\": [\"name\", \"department\", \"salary\"],\n  \"sort\": [{\"field\": \"salary\", \"order\": \"desc\"}]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Multiple conditions: salary range + department filter"
          }
        },
        {
          "name": "LIKE pattern matching",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"filter\": {\"email\": {\"like\": \"%@company.com\"}},\n  \"projection\": [\"name\", \"email\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Pattern matching with LIKE operator"
          }
        },
        {
          "name": "Pagination example",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"QUERY\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\",\n  \"sort\": [{\"field\": \"name\", \"order\": \"asc\"}],\n  \"limit\": 2,\n  \"offset\": 0\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Pagination: First page (offset=0, limit=2)"
          }
        },
        {
          "name": "COMPACT table",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"operation\": \"COMPACT\",\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"namespace\": \"{{namespace}}\",\n  \"table\": \"employees\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/database",
              "host": ["{{baseUrl}}"],
              "path": ["database"]
            },
            "description": "Merge small files to improve query performance"
          }
        }
      ]
    }
  ]
}
