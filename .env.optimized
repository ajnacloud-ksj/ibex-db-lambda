# Optimized Configuration for IbexDB Lambda
# These settings enable performance optimizations

# Cache Configuration
ENABLE_CACHE=true
CACHE_MAX_SIZE=500              # Maximum number of cached items
CACHE_TTL=300                   # Cache TTL in seconds (5 minutes)
READ_CACHE_TTL=60               # TTL for read query cache (1 minute)
INCLUDE_CACHE_STATS=false       # Include cache stats in response (for debugging)

# DuckDB Configuration
DUCKDB_MEMORY_LIMIT=2GB         # Memory limit for DuckDB
DUCKDB_THREADS=2                # Number of threads
DUCKDB_ENABLE_OBJECT_CACHE=true # Enable object caching

# Lambda Configuration
LAMBDA_MEMORY_SIZE=3008          # 3GB memory (2 vCPUs)
LAMBDA_TIMEOUT=30                # 30 second timeout
RESERVED_CONCURRENT_EXECUTIONS=5 # Keep 5 instances warm

# S3 Configuration
S3_USE_EXPRESS_ONE_ZONE=true    # Use S3 Express One Zone for better performance
S3_MULTIPART_THRESHOLD=10485760 # 10MB threshold for multipart uploads

# Debug/Monitoring
DEBUG=false                      # Show detailed error traces
LOG_LEVEL=INFO                   # Logging level
ENABLE_XRAY=true                 # Enable AWS X-Ray tracing

# Warmup Configuration
ENABLE_WARMUP=true               # Enable warmup events
WARMUP_SCHEDULE="rate(5 minutes)" # Keep warm every 5 minutes
PRELOAD_TABLES=food_entries,receipts,users # Tables to preload on warmup